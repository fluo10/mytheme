{% import "macros.html" as macros %}

<!DOCTYPE html>
<html lang={% if lang %}{{lang}}{% elif config.default_language %}{{config.default_language}}{% else %}"en"{% endif %}>

<head>

  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  
  <title>{% block title %}{{config.title}}{%endblock title %}</title>
  <link rel="stylesheet" href="{{ get_url(path='style.css', trailing_slash=false)}}">
  <style>  
    :root{
      --base-hue: {{config.extra.base_color.hue}};
      --base-saturation: {{config.extra.base_color.saturation}}; 
      --font-family: {{macros::get_extra_configure_by_lang(key="fonts.main", lang=lang) | trim | safe}};
      --header-font-family: {{macros::get_extra_configure_by_lang(key="fonts.sidebar", lang=lang) | trim | safe}};
      --title-font-family: {{macros::get_extra_configure_by_lang(key="fonts.title", lang=lang) | trim | safe}};
    }
  </style>
  {% set additional_head_key = macros::get_extra_configure_by_lang(key="additional_head", lang=lang, only_key=true)|trim %}
  {% set additional_heads = config[additional_head_key] %}
  {% if additional_heads %}
    {% for additional_head in additional_heads %}
        {{additional_head | safe}}
    {% endfor %}
  {% endif %}
</head>
<body>
<div class="site">
    {% block header %}
  <header class="sidebar">
    <h2 class="site-title"><a href={{macros::get_top_url(lang=lang)}}>{{config.title}}</a></h2>
  </header>
  {% endblock header %}

  <main class="content">
  {% block content %} 
    
  {% endblock content%}
  </main>
  {% block nav %}
  <nav class="sidebar">
    <div id="sp-menu"class="hidden">

      {% if config.description %}
        {% if config.translations[lang].description %}
          <p class="description">{{ config.translations[lang].description | safe }}</p>
        {% else %}
          <p class="description">{{ config.description | safe }}</p>
        {% endif %}
      {% endif %}
      {% if config.extra.menues.author %}
        <h3>{{ macros::get_extra_configure_by_lang(key="menues.author.label", lang=lang) }}</h3>
        <p>{{ macros::get_extra_configure_by_lang(key="menues.author.name", lang=lang) }}</p>
        <p>{{ macros::get_extra_configure_by_lang(key="menues.author.description", lang=lang) }}</p>
        <ul class="sns-links">
          {% if config.extra.menues.author.twitter %}
            <li class="sns-link"><a href="https://twitter.com/{{config.extra.menues.author.twitter}}" target="_blank">twitter</a></li>
          {% endif %}
          {% if config.extra.menues.author.github %}
          <li class="sns-link"><a href="https://github.com/{{config.extra.menues.author.github}}" target="_blank">github</a></li>
          {% endif %}
        </ul>
      {% endif %}
      {% if config.extra.menues.categories %}
      <h3>{{ macros::get_extra_configure_by_lang(key="menues.categories.label", lang=lang) }}</h3> 
      <ul class="cat-links">
        {{ macros::term_list_items(taxonomy_name="categories", class="cat-link")}}
      </ul>
      {% endif%}
      {% if config.extra.menues.tags %}
      <h3>{{ macros::get_extra_configure_by_lang(key="menues.tags.label", lang=lang) }}</h3> 
      <ul class="tag-links">
        {{ macros::term_list_items(taxonomy_name="tags", class="tag-link")}}
      </ul>
      {% endif %}
    </div>
  </nav>
  {% endblock nav %}
  <footer class="sidebar">
    
    {% if config.languages %}
    <ul class="lang-links">
      {% for language in config.languages | map(attribute="code") | concat(with=config.default_language) | sort %}
        {% if lang == language %}
          <li class="lang-link active">{{ language }}</li>
        {% else %}
          <li class="lang-link"><a href="{{macros::get_top_url(lang=language)}}">{{ language }}</a></li>
        {% endif %}
      {% endfor %}
    </ul>
    {% endif %}
  </footer>
</body>

</html>
